<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<!-- saved from url=(0029)/ -->
<html lang="vi" class="no-touch">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <th:block th:replace="/ohana/layout/head :: head('Ohana - Tìm ở ghép, phòng trọ siêu nhanh')"/>
    <style>
        body {
            background-color: #F6F5F2;
        }

        .icon-search {
            color: rgb(247, 52, 134);
            font-size: 16px;
            margin-right: 13px;
        }
        #searchHome{
            border-radius: 25px;
            text-align: center;
            inset: 15px auto auto -21px !important;
            overflow: hidden;
        }
        .dropdown-item:hover{
            background-color: #E0E0E0;
        }
    </style>
</head>


<body data-new-gr-c-s-check-loaded="14.1057.0" data-gr-ext-installed="" cz-shortcut-listen="true">
<div id="root">
    <div class="app">
        <div class="_3bjUj">
            <!--header-->
            <th:block th:replace="/ohana/layout/header :: header(${userResult})"/>
            <div class="JBrYJ">
                <div class="_2dy7l">
                    <!--                    <div class="_3a2WU">-->
                    <!--                        <img src="/resources/ohana/img/8541c2b17a0729942ed2a6f13b7b13e4.svg">-->
                    <!--                        <div class="_2Ba_5">-->
                    <!--                            <span class="_2YbWr">Trang chủ</span>-->
                    <!--                            &lt;!&ndash;                            <a target="_blank" href="https://blog.ohanaliving.vn/">&ndash;&gt;-->
                    <!--                            &lt;!&ndash;                                <span class="_2_b-t _1vH0j">Blog</span>&ndash;&gt;-->
                    <!--                            &lt;!&ndash;                            </a>&ndash;&gt;-->
                    <!--                            <a href="/post-room">-->
                    <!--                                <span class="_2_b-t _1vH0j">Đăng phòng</span>-->
                    <!--                            </a>-->

                    <!--                        </div>-->
                    <!--                    </div>-->
                    <p class="_1hc9n">Ứng dụng tìm kiếm phòng trọ miễn phí cho người đi thuê hàng đầu Việt Nam</p>
                    <div class="_1_U71">
                        <div class="_2lKdR">
                            <div class="_3p4ES _1vH0j" id="floating-city-dropdown" style="min-width: 200px">
                                <div class="wj6oE">
                                    <a type="button" class="rounded-circle" id="renderSe" data-bs-toggle="dropdown" aria-expanded="false">
                                       
                                    </a>
                                    <ul class="dropdown-menu" id="searchHome">
                                        <li style=" border-bottom: 1px solid #333"><a class="dropdown-item" id="searchHue">Huế</a></li>
                                        <li ><a class="dropdown-item" id="searchDn">Đà Nẵng</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="_1pVEQ"><input id="search" class="bX6zE"
                                                       placeholder="Tìm kiếm theo địa điểm, huyện, tên đường..."
                                                       value="">
                                <div class="_2QckJ"><span class="icon-search"
                                                          style="color: rgb(255, 255, 255); font-size: 32px;"></span>
                                </div>
                            </div>
                            <div class="_1IdUV">
                                <ul class="b-CdA _11SSO" style="left: 157px;" id="location">

                                    <!--                                                                    <a href="#/result/Đường-711B&#45;&#45;Quận-9/1">-->
                                    <!--                                                                    <li class="J_X1w">Đường 711B, Quận 9</li>-->
                                    <!--                                                                    </a>-->
                                    <!--                                                                    <a href="#/result/Đường-16&#45;&#45;Quận-4/1"><li class="J_X1w">Đường 16, Quận 4</li></a><a href="#/result/đường-54&#45;&#45;Quận-2/1"><li class="J_X1w">đường 54, Quận 2</li></a><a href="#/result/Đường-10A&#45;&#45;Quận-4/1"><li class="J_X1w">Đường 10A, Quận 4</li></a><a href="#/result/Đường-D1&#45;&#45;Quận-2/1"><li class="J_X1w">Đường D1, Quận 2</li></a><a href="#/result/Đường-12A&#45;&#45;Quận-4/1"><li class="J_X1w">Đường 12A, Quận 4</li></a><a href="#/result/Đường-455&#45;&#45;Quận-9/1"><li class="J_X1w">Đường 455, Quận 9</li></a><a href="#/result/Đường-A&#45;&#45;Huyện-Bình-Chánh/1"><li class="J_X1w">Đường A, Huyện Bình Chánh</li></a><a href="#/result/Đường-13&#45;&#45;Quận-2/1"><li class="J_X1w GpngF">Đường 13, Quận 2</li></a>-->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="_1pAkN">
            <div class="_27LWy">
                <p class="yGUOJ">Xu hướng tìm kiếm</p>
                <div class="_3C4O2" id="trends">

                </div>
            </div>
            <div class="_3jxzh">
                <div class="_1ACOA">
                    <div class="_32N20 _3Nvxb mt-5">
                        <div class="_1Tf_Z">
                                <span class="_3gUBz">
                                    <span class="_2TvH9">Phòng mới nhất</span>
                                </span>
                            <a href="/search">
                                <div class="_1Gwyz _1vH0j">
                                    <span>Xem tất cả</span>
                                </div>
                            </a>
                        </div>
                        <div class="_1RkT-">
                            <section>
                                <div class="data-container">

                                </div>
                                <a href="/search">
                                    <div class="_3X6_U">
                                        <span>Xem tất cả</span>
                                    </div>
                                </a>
                            </section>
                        </div>
                    </div>
                </div>
                <div class="_3eGuJ">
                    <div class="_2qYc6 _3Nvxb mt-5">
                        <div class="_1Tf_Z _2o1M1"><span class="_3gUBz"><span class="icon-shield"
                                                                              style="color: rgb(72, 119, 248); font-size: 32px;"></span><span
                                class="_2TvH9">Đã xác thực</span></span><a href="/search">
                            <div class="_1Gwyz _1vH0j"><span>Xem tất cả</span></div>
                        </a></div>
                        <div class="_2YccU">
                            <div class="_2UeBM"><a target="_blank" href="/room.html">
                                <div class="_2QGFT sLxZO _2DJkz">
                                    <div class="_248il"><img
                                            src="/resources/ohana/img/20c8373d39e30d04cde885686abc2987.png"
                                            alt="verified-img" class="_1TPDO"></div>
                                    <img
                                            src="/resources/ohana/img/property-images_1610865968860_received_329664098218414.jpeg"
                                            alt="room-img" class="_3nHfZ">
                                    <p class="_3fYd3">HOMESTAY DORM Home 1 phường 1 Gò Vấp</p>
                                    <div class="_3lVLQ"><span class="_1v4nA">Quận Gò Vấp</span><span
                                            class="_2ldkt">1,5 tr/người</span></div>
                                </div>
                            </a></div>
                            <div class="_2UeBM"><a target="_blank" href="/room.html">
                                <div class="_2QGFT sLxZO _2DJkz">
                                    <div class="_248il"><img
                                            src="/resources/ohana/img/20c8373d39e30d04cde885686abc2987.png"
                                            alt="verified-img" class="_1TPDO"></div>
                                    <img
                                            src="/resources/ohana/img/2b271aa2-779e-4bb3-b9dc-0a730084fc22-46325561_1975119655915194_6045991570992267264_n.jpg"
                                            alt="room-img" class="_3nHfZ">
                                    <p class="_3fYd3">Ký túc xá quận Thủ Đức</p>
                                    <div class="_3lVLQ"><span class="_1v4nA">Quận Thủ Đức</span><span
                                            class="_2ldkt">1,5 tr/người</span></div>
                                </div>
                            </a></div>
                            <div class="_2UeBM"><a target="_blank" href="/room.html">
                                <div class="_2QGFT sLxZO _2DJkz">
                                    <div class="_248il"><img
                                            src="/resources/ohana/img/20c8373d39e30d04cde885686abc2987.png"
                                            alt="verified-img" class="_1TPDO"></div>
                                    <img
                                            src="/resources/ohana/img/property-images_1645104422405_IMG_7299.JPG"
                                            alt="room-img"
                                            class="_3nHfZ">
                                    <p class="_3fYd3">Phòng cho thuê Nguyễn Sỹ Sách, Quận Tân Bình</p>
                                    <div class="_3lVLQ"><span class="_1v4nA">Quận Tân Bình</span><span
                                            class="_2ldkt">2,2 tr/phòng</span></div>
                                </div>
                            </a></div>
                            <div class="_2UeBM"><a target="_blank" href="/room.html">
                                <div class="_2QGFT sLxZO _2DJkz">
                                    <div class="_248il"><img
                                            src="/resources/ohana/img/20c8373d39e30d04cde885686abc2987.png"
                                            alt="verified-img" class="_1TPDO"></div>
                                    <img
                                            src="/resources/ohana/img/property-images_1647699346746_IMG_8554.HEIC"
                                            alt="room-img"
                                            class="_3nHfZ">
                                    <p class="_3fYd3">Phòng cho thuê Bầu Cát 2, Quận Tân Bình</p>
                                    <div class="_3lVLQ"><span class="_1v4nA">Quận Tân Bình</span><span
                                            class="_2ldkt">2,4 tr/phòng</span></div>
                                </div>
                            </a></div>
                            <div class="_2UeBM"><a target="_blank" href="/room.html">
                                <div class="_2QGFT sLxZO _2DJkz">
                                    <div class="_248il"><img
                                            src="/resources/ohana/img/20c8373d39e30d04cde885686abc2987.png"
                                            alt="verified-img" class="_1TPDO"></div>
                                    <img
                                            src="/resources/ohana/img/property-images_1598331300474_IMG_20200825_115316.jpg"
                                            alt="room-img" class="_3nHfZ">
                                    <p class="_3fYd3">HOMESTAY DORM MẶT TIỀN D5 HÀNG XANH</p>
                                    <div class="_3lVLQ"><span class="_1v4nA">Quận Bình Thạnh</span><span
                                            class="_2ldkt">1,9 tr/người</span></div>
                                </div>
                            </a></div>
                        </div>
                        <a href="/search">
                            <div class="_3X6_U KNq0i">
                                <span>Xem tất cả</span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!--            footer-->
        <th:block th:replace="/ohana/layout/footer :: footer"/>
    </div>
</div>
<th:block th:replace="/ohana/layout/script :: script"/>

<th:block th:if="${success == true}">
    <script>
        showSuccess('Đăng nhập thành công!!!')
    </script>
</th:block>
<script src="/resources/paginationjs-master/paginationjs-master/src/pagination.js"></script>
<script>
    $(function () {
        let provin = 46;
        $("#renderSe").html(renderSearch(provin))
        apiProvince(provin)
        $("#trends").html(renderTrenHue())
    })
    $("#searchDn").on("click", () =>{
        let provin = 48;
        $("#renderSe").html(renderSearch(provin))
        apiProvince(provin);
        $("#trends").html(renderTrenDn())
    })
    $("#searchHue").on("click", () =>{
        let provin = 46;
        $("#renderSe").html(renderSearch(provin))
        apiProvince(provin);
        $("#trends").html(renderTrenHue())
    })
    function renderSearch(provin){
        if (provin == 48) {
            return `<span class="icon-location-fill" style="color: rgb(247, 52, 134); font-size: 16px;"></span>
                    <span class="_1qNTb">Đà Nẵng</span>
                    <span class="icon-a-down" style="color: rgb(102, 102, 102); font-size: 24px;"></span>`
        }else{
            return `<span class="icon-location-fill" style="color: rgb(247, 52, 134); font-size: 16px;"></span>
                    <span class="_1qNTb">Huế</span>
                    <span class="icon-a-down" style="color: rgb(102, 102, 102); font-size: 24px;"></span>`
        }
    }

    function renderTrenHue(){
        return`
        <div>
            <a href="/search?provinceName=Tỉnh Thừa Thiên Huế&districtName=Thành Phố Huế&wardId=19801&wardName=Phường An Cựu">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/phuong-an-cuu.jpg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">An Cựu</span>
                    </div>
                </div>
            </a>
        </div>
        <div>
            <a href="/search?provinceName=Tỉnh Thừa Thiên Huế&districtName=Thành Phố Huế&wardId=19792&wardName=Xuân Phú">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/phuong-xuan-phu.jpeg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">Xuân Phú</span>
                    </div>
                </div>
            </a>
        </div>
        <div>
            <a href="/search?provinceName=Tỉnh Thừa Thiên Huế&districtName=Thành Phố Huế&wardId=19777&wardName=Vĩ Dạ">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/phuong-vy-da.jpeg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">Vĩ Dạ</span>
                    </div>
                </div>
            </a>
        </div>
        <div>
            <a href="/search?provinceName=Tỉnh Thừa Thiên Huế&districtName=Thành Phố Huế&wardId=19816&wardName=An Tây">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/phuong-an-tay.jpeg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">An Tây</span>
                    </div>
                </div>
            </a>
        </div>
        <div>
            <a href="/search?provinceName=Tỉnh Thừa Thiên Huế&districtName=Thành Phố Huế&wardId=19783&wardName=Vĩnh Ninh">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/phuong-vinh-ninh.jpeg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">VĨnh Ninh</span>
                    </div>
                </div>
            </a>
        </div>
        <div>
            <a href="/search?provinceName=Tỉnh Thừa Thiên Huế&districtName=Thành Phố Huế&wardId=19759&wardName=Phú Hậu">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/phuong-phu-hau.jpeg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">Phú Hậu</span>
                    </div>
                </div>
            </a>
        </div>
        `
    }

    function renderTrenDn(){
        return`
        <div>
            <a href="/search?provinceName=Thành Phố Đà Nẵng&districtId=493&districtName=Quận Sơn Trà">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/Trung_tâm_Hành_chính_quận_Sơn_Trà_2.jpeg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">Quận Sơn Trà</span>
                    </div>
                </div>
            </a>
        </div>
        <div>
            <a href="/search?provinceName=Thành Phố Đà Nẵng&districtId=494&districtName=Quận Ngũ Hành Sơn">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/ngu-hanh-son-da-nang-1.jpeg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">Quận Ngũ Hành Sơn</span>
                    </div>
                </div>
            </a>
        </div>
        <div>
            <a href="/search?provinceName=Thành Phố Đà Nẵng&districtId=492&districtName=Quận Hải Châu">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/van-phong-cong-chung-quan-hai-chau.jpg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">Quận Hải Châu</span>
                    </div>
                </div>
            </a>
        </div>
        <div>
            <a href="/search?provinceName=Thành Phố Đà Nẵng&districtId=490&districtName=Quận Liên Chiểu">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/2166085.png); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">Quận Liên Chiểu</span>
                    </div>
                </div>
            </a>
        </div>
        <div>
            <a href="/search?provinceName=Thành Phố Đà Nẵng&districtId=491&districtName=Quận Thanh Khê">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/quang-canh-quan-thanh-khe.jpg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">Quận Thanh Khê</span>
                    </div>
                </div>
            </a>
        </div>
        <div>
            <a href="/search?provinceName=Thành Phố Đà Nẵng&districtId=495&districtName=Quận Cẩm Lệ">
                <div class="_1vH0j FvthK"
                     style="background-image: url(/resources/ohana/img/gui-hang-di-Quan-Cam-Le-Da-Nang.jpg); background-repeat: no-repeat; background-size: cover;">
                    <div class="_2CKh0">
                        <span class="_3BLx6">Quận Cẩm Lệ</span>
                    </div>
                </div>
            </a>
        </div>
        `
    }

    function apiProvince (province) {
        let fomrData = {
            locationFilter: {
                provinceId : province
            }
        }
        $.ajax({
            url: App.BASE_URL_API + "/posts/trendPost",
            data: JSON.stringify(fomrData),
            headers: {
                "Content-Type": "application/json"
            },
            type: "POST",
        }).done(function (data) {
            $(".data-container").empty()
            $.each(data.content, (i, item) => {
                post = item;
                $(".data-container").append(paging(item))
            });
        }).fail(function (err) {
            console.log(err)
            showError("Get Filter Fail")
        })
    }

    function paging(item) {
        post = item
        let typeRoom;

        function checkPrice(price) {
            if (price >= 1000000) {
                switch (post.category.id) {
                    case 1:
                    case 2:
                        typeRoom = "tr/phòng"
                        break;
                    case 3:
                        typeRoom = "tr/người"
                        break;
                    case 4:
                    case 5:
                        typeRoom = "tr/căn"
                        break;
                }
                return price / 1000000;
            } else {
                switch (post.category.id) {
                    case 1:
                    case 2:
                        typeRoom = "k/phòng"
                        break;
                    case 3:
                        typeRoom = "k/người"
                        break;
                    case 4:
                    case 5:
                        typeRoom = "k/căn"
                        break;
                }
                return price / 1000;
            }
        }

        let price = checkPrice(post.rentHouse.roomPrice);

        let gender;
        if (post.rentHouse.gender.id == 1) {
            gender = "Nam/Nữ";
        } else {
            gender = post.rentHouse.gender.name;
        }
        // let image_thumbnail = App.BASE_URL_CLOUD_IMAGE + "/" + App.SCALE_IMAGE_W600_H650_Q100 + "/" + post.thumbnailId + ".jpg";
        let image_thumbnail = `https://res.cloudinary.com/dh8nlcoul/image/upload/w_190,h_220,r_10/l_l_cloudinary_icon,c_limit,w_50,h_50,o_60/${post.thumbnailId}.jpg`;
        return `
            <div class="nctjX">
                <a target="_blank" href="/${post.id}/room">
                    <div class="X8svI _2DJkz">
                        <div class="pcGxo">
                            <div class="_1Gm0b"><img
                                    src="/resources/ohana/img/20c8373d39e30d04cde885686abc2987.png"
                                    alt="verified-img" class="_1TPDO"></div>
                            <img src=${image_thumbnail}
                                 alt="room-img"
                                 class="_1IOeB">
                        </div>
                        <div class="_228LH">
                            <p class="_3xXyQ" >${post.title}</p>
                            <div class="_27rcQ">
                                <div class="_3piN7">
                                    <div class="wpwoK"><span class="icon-nav-home"
                                                             style="color: rgb(102, 102, 102); font-size: 24px; margin-right: 8px;"></span><span
                                           >${post.category.title}</span>
                                           <span
                                                             style="color: rgb(102, 102, 102); font-size: 24px; margin-right: 8px;"></span><span
                                           >Sức chứa: ${post.rentHouse.capacity}</span></div>
                                    <div class="_3TYbx"><span><span class="icon-nav-roomate"
                                                                    style="color: rgb(102, 102, 102); font-size: 24px; margin-right: 8px;"
                                                                   >${gender}</span></span><span><span
                                            class="icon-squaremeter"
                                            style="color: rgb(102, 102, 102); font-size: 24px; margin-right: 8px;"
                                           >${post.rentHouse.area}</span>m<sup>2</sup></span>
                                    </div>
                                    <div class="_1jHdY"><span class="icon-location"
                                                              style="color: rgb(102, 102, 102); font-size: 24px; margin-right: 8px;"></span><span
                                            class="uKi2L"
                                           >${post.location.line1}, ${post.location.wardName}, ${post.location.districtName}, ${post.location.provinceName}</span>
                                    </div>
                                </div>
                                <div class="_1ezn1">
                                    <span class="_36r7N">${price}</span>
                                    <span class="_11LqE">${typeRoom}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                </a>
            </div>
         `;
    }


    $("#search").on('input', () => {
        let valueSearch = $("#search").val();
        $("#location").html("");
        if (valueSearch.length > 2) {
            $("._1IdUV").show(250);
            $.ajax({
                type: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                data: JSON.stringify({keyword: valueSearch})
                ,
                url: App.BASE_URL_API + "/posts/filter?page=0&size=10"
            }).done(function (data) {
                let locationDetail;
                $("#location").empty()
                console.log(data)
                data.content.forEach(({location}) => {
                    let item = location
                    if (item.provinceId== 48){
                        let str = `<a href="/search?provinceName=${item.provinceName}&districtId=${item.districtId}&districtName=${item.districtName}"><li role="button" class="li-search" >

                                    ${item.districtName}</li> </a>`;
                        $("#location").append(str);
                        $("#location").empty()
                    }
                    if (item.provinceId== 46){
                        let str = `<a href="/search?provinceName=${item.provinceName}&districtName=${item.districtName}&wardId=${item.wardId}&wardName=${item.wardName}"><li role="button" class="li-search" >

                                    ${item.wardName}</li> </a>`;
                        $("#location").append(str);
                        $("#location").empty()
                    }
                })
                data.content.forEach(({location}) => {
                    let item = location
                    if (item.wardName == null) {
                        locationDetail = item.districtName;
                    } else {
                        locationDetail = item.wardName;
                    }
                    let str = `<a href="/search?provinceName=${item.provinceName}&wardId=${item.wardId}&line1=${item.line1}&wardName=${item.wardName}"><li role="button" class="li-search" >

                                    ${item.line1}, ${item.wardName}</li> </a>`;
                    $("#location").append(str);
                })
            }).fail(function () {
                showError('Error')
            })
        }
    })


</script>
</body>

</html>